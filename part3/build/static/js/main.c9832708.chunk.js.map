{"version":3,"sources":["components/FilteredPeople.js","components/FilterForm.js","components/InputForm.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["FilteredPeople","props","filtered","map","person","name","number","onClick","onclick","value","JSON","stringify","FilterForm","onChange","InputForm","onSubmit","onSub","nameValue","nameChange","numberValue","numberChange","type","baseUrl","axios","post","id","delete","put","Notification","notification","className","style","message","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","filter","setFilter","notif","setNotif","useEffect","get","then","response","data","filterNames","toLowerCase","includes","deletePerson","event","parse","target","window","confirm","personsService","newPersons","setTimeout","catch","error","preventDefault","nameObject","isUnique","forEach","concat","console","log","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c9832708.chunk.js","sourcesContent":["import React from 'react'\n\nconst FilteredPeople = (props) => {\n    return (\n      <div>\n        {props.filtered.map(person => \n          <div key={person.name}>\n            <span>{person.name} : {person.number}</span>\n            <button onClick={props.onclick()} value={JSON.stringify(person)}>Delete</button>\n          </div>\n        )}\n      </div>\n    )\n  }\n\nexport default FilteredPeople","import React from 'react'\n\nconst FilterForm = (props) => {\n    return (\n      <div>\n        filter: <input \n          value={props.value} \n          onChange={props.onChange}\n          />\n      </div>\n    )\n  }\n\nexport default FilterForm","import React from 'react'\n\nconst InputForm = (props) => {\n    return (\n    <form onSubmit={props.onSub}>\n      <div>\n        name: <input \n          value={props.nameValue} \n          onChange={props.nameChange}\n          />\n      </div>\n      <div>\n        number: <input \n          value={props.numberValue} \n          onChange={props.numberChange}\n          />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n    )\n  }\n  \n\nexport default InputForm","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst addToDB = (person) => {\n     return axios.post(baseUrl, person)\n}\n\nconst deleteFromDB = (id) => {\n    return axios.delete(baseUrl + `/${id}`)\n}\n\nconst updateDB = (person) => {\n    return axios.put(baseUrl + `/${person.id}`, person)\n}\n\nexport default {\n    addToDB,\n    deleteFromDB,\n    updateDB\n}","import React from 'react'\n\nconst Notification = ({notification}) => {\n\n    if (notification === null) {\n        return null\n      }\n    \n      return (\n        <div className={notification.style}>\n          {notification.message}\n        </div>\n      )\n}\n\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport AllPeople from './components/AllPeople'\nimport FilteredPeople from './components/FilteredPeople'\nimport FilterForm from './components/FilterForm'\nimport InputForm from './components/InputForm'\nimport personsService from './services/persons'\nimport Notification from './components/Notification'\n\nconst baseURL = '/api/persons'\n\nconst App = () => {\n\n  // states\n  const [ persons, setPersons ] = useState([]) \n  const [ newName, setNewName ] = useState('Insert a name...')\n  const [ newNumber, setNewNumber ] = useState('555-555-5555')\n  const [ filter, setFilter ] = useState('')\n  const [ notif, setNotif ] = useState(null)\n\n  //effects\n  useEffect(() => {\n    axios\n      .get(baseURL)\n      .then(response => {\n        setPersons(response.data)\n      })\n  }, [])\n\n  const filterNames = persons.filter((person) => {\n    return person.name.toLowerCase().includes(filter.toLowerCase())\n    })\n\n  // functions\n  const addPerson = (event) => {\n    event.preventDefault()\n\n    const nameObject = {\n      name: newName,\n      number: newNumber\n    }\n\n    var isUnique = true\n    persons.forEach((person) => {\n      if (newName.toLowerCase() === person.name.toLowerCase()){\n        isUnique = false\n        //get the id of the person\n        nameObject.id = person.id\n      }\n    })\n\n    if (isUnique) {\n      personsService\n      .addToDB(nameObject)\n      .then(response => {\n          setPersons(persons.concat(response.data))\n          setNewName('')\n          setNewNumber('')\n          setNotif(\n            {\n              message: 'Person added successfully!',\n              style: 'successMessage'\n            })\n          setTimeout(() => {\n            setNotif(null)\n          }, 5000)\n      })\n      .catch(error => {\n        console.log(error.response.data.message)\n        setNotif(\n          {\n            message: error.response.data.message,\n            style: 'errorMessage'\n          })\n      })\n    } else {\n      if(window.confirm(`${newName} is already listed. Update number?`)){\n        personsService\n        .updateDB(nameObject)\n        .then(response => {\n          setPersons(persons.map(person => person.id !== response.data.id ? person : response.data))\n          setNewName('')\n          setNewNumber('')\n          setNotif(\n            {\n              message: 'Person modified successfully!',\n              style: 'successMessage'\n            })\n          setTimeout(() => {\n            setNotif(null)\n          }, 5000)\n        })\n      }\n    }\n  }\n\n  const deletePerson = (event) => {\n    let deletePerson = JSON.parse(event.target.value)\n    if (window.confirm(`Do you wish to delete ${deletePerson.name}?`)){\n      personsService\n      .deleteFromDB(deletePerson.id)\n      .then(response => {\n        var newPersons = persons.filter(person => person.id !== deletePerson.id)\n        setPersons(newPersons)\n        setNotif(\n          {\n            message: 'Person deleted successfully!',\n            style: 'successMessage'\n          })\n        setTimeout(() => {\n          setNotif(null)\n        }, 5000)\n      })\n      .catch(error => {\n        setNotif(\n          {\n            message: 'Person has already been deleted from the server. Updating list...',\n            style: 'errorMessage'\n          })\n        setTimeout(() => {\n          setNotif(null)\n        }, 5000)\n        setPersons(persons.filter(person => person.id !== deletePerson.id))\n      })\n    }\n  }\n\n  // handlers\n  const handleNewName = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNewNumber = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilter = (event) => {\n    setFilter(event.target.value)\n  }\n\n  // return html\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification notification={notif}/>\n      <FilterForm \n        value={filter}\n        onChange={handleFilter}\n      />\n      <InputForm \n        onSub={addPerson}\n        nameValue={newName}\n        nameChange={handleNewName}\n        numberValue={newNumber}\n        numberChange={handleNewNumber}\n      />\n      \n      <h2>Search Results</h2>\n      <FilteredPeople \n        filtered={filterNames}\n        onclick={() => deletePerson}\n      />\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}