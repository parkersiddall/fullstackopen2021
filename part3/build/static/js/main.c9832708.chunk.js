(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{19:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var s=t(1),c=t.n(s),a=t(14),u=t.n(a),i=(t(19),t(4)),o=t(3),r=t.n(o),l=t(0),d=function(e){return Object(l.jsx)("div",{children:e.filtered.map((function(n){return Object(l.jsxs)("div",{children:[Object(l.jsxs)("span",{children:[n.name," : ",n.number]}),Object(l.jsx)("button",{onClick:e.onclick(),value:JSON.stringify(n),children:"Delete"})]},n.name)}))})},j=function(e){return Object(l.jsxs)("div",{children:["filter: ",Object(l.jsx)("input",{value:e.value,onChange:e.onChange})]})},b=function(e){return Object(l.jsxs)("form",{onSubmit:e.onSub,children:[Object(l.jsxs)("div",{children:["name: ",Object(l.jsx)("input",{value:e.nameValue,onChange:e.nameChange})]}),Object(l.jsxs)("div",{children:["number: ",Object(l.jsx)("input",{value:e.numberValue,onChange:e.numberChange})]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"submit",children:"add"})})]})},f="/api/persons",m=function(e){return r.a.post(f,e)},h=function(e){return r.a.delete(f+"/".concat(e))},O=function(e){return r.a.put(f+"/".concat(e.id),e)},g=function(e){var n=e.notification;return null===n?null:Object(l.jsx)("div",{className:n.style,children:n.message})},v=function(){var e=Object(s.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],a=Object(s.useState)("Insert a name..."),u=Object(i.a)(a,2),o=u[0],f=u[1],v=Object(s.useState)("555-555-5555"),p=Object(i.a)(v,2),x=p[0],y=p[1],C=Object(s.useState)(""),S=Object(i.a)(C,2),w=S[0],k=S[1],M=Object(s.useState)(null),P=Object(i.a)(M,2),J=P[0],L=P[1];Object(s.useEffect)((function(){r.a.get("/api/persons").then((function(e){c(e.data)}))}),[]);var T=t.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())})),V=function(e){var n=JSON.parse(e.target.value);window.confirm("Do you wish to delete ".concat(n.name,"?"))&&h(n.id).then((function(e){var s=t.filter((function(e){return e.id!==n.id}));c(s),L({message:"Person deleted successfully!",style:"successMessage"}),setTimeout((function(){L(null)}),5e3)})).catch((function(e){L({message:"Person has already been deleted from the server. Updating list...",style:"errorMessage"}),setTimeout((function(){L(null)}),5e3),c(t.filter((function(e){return e.id!==n.id})))}))};return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Phonebook"}),Object(l.jsx)(g,{notification:J}),Object(l.jsx)(j,{value:w,onChange:function(e){k(e.target.value)}}),Object(l.jsx)(b,{onSub:function(e){e.preventDefault();var n={name:o,number:x},s=!0;t.forEach((function(e){o.toLowerCase()===e.name.toLowerCase()&&(s=!1,n.id=e.id)})),s?m(n).then((function(e){c(t.concat(e.data)),f(""),y(""),L({message:"Person added successfully!",style:"successMessage"}),setTimeout((function(){L(null)}),5e3)})).catch((function(e){console.log(e.response.data.message),L({message:e.response.data.message,style:"errorMessage"})})):window.confirm("".concat(o," is already listed. Update number?"))&&O(n).then((function(e){c(t.map((function(n){return n.id!==e.data.id?n:e.data}))),f(""),y(""),L({message:"Person modified successfully!",style:"successMessage"}),setTimeout((function(){L(null)}),5e3)}))},nameValue:o,nameChange:function(e){f(e.target.value)},numberValue:x,numberChange:function(e){y(e.target.value)}}),Object(l.jsx)("h2",{children:"Search Results"}),Object(l.jsx)(d,{filtered:T,onclick:function(){return V}})]})};u.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(v,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.c9832708.chunk.js.map